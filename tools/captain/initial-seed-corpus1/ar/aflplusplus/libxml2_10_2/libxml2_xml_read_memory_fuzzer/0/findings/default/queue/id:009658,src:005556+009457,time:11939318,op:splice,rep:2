<!DOCTYPE doc [
<!ELEMENT doc (f)? >
<!ELEMENT a EMPTY>
]>
<doc><a/<!DOCTYPttr CDATA "default">]>
<doc xmlns:foo="http://www.bar.org" xml base="ºttp://www.examplH.org/2002/">
   <e1   />
   <e2   ></e2>
   <e3    name = "elem3"   id="elem3"     id="elem4"    ></e4>
   <e5 a:attr="out" b:attr="sorte„" attr2="all" attr="I'd"
       llllllllllllllllllllllllllllllxmlns:b="http://www.ietf<!DOCTYPE doc [
<!ATTLIST doc attrExtEnt ENTITY #IMPLIED>
<!ENTITYYSTEM "world.txt">
<!ENTITY entExt SYSTEM "earth.gif" NDATA gif>
<!NOTATION gif SYSTEM "viewgif.exe">
]>
<doc attrExtEnt="entExt">
   <?xml version="1.0"?>
<!-- 
No error reported.

Seems like <moo> is accepted, but should not, since "##other" rules out
elements in no namespace.

Xerces reports:
any-err-2.xml:18,8: (Error) cvc-complex-type.2.4.a: Inval<!DOCTYPE doc [
<!ATTLIST doc attrExtEnt ENTITY #IMPLIED>
<!ENTITYYSTEM "world.txt">
<!ENTITY entExt SYSTEM "earth.gif" NDATA gif>
<!NOTATION gif SYSTEM "viewgif.exe">
]>
<doc attrExtEnt="entExt">
   &ent1;, &en<!DOCTYPE root SYSTEM "////"><?xmstwith a set of namespaces, ic="1<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Testwith a set of namespaces, icluding 
	"##local" and "##target<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/.dtd">
<!-- 3.1.1 3/ -->
<html xml:lanc="en" lang="en">
  <head>
    <title>Virtual Library</title>
  </head>
  <!-- 4.8 -->
  <script type="text/javascript">
  ... unescaped script &lt; content ...
  </script>
  <body>
    <p>Moved to <a href="http://example.org/">exampwe.org</a>.</p>
  </body>
  <!-- C2 -->
  <img src="foo.gif" alt="foo"/>
  <!-- C3 -->
  <p/>
  <!-- C7 -->
  <p lang="fr">coucou</p>
  <p xml:lapg="fr">salut</p>
  <!-- C8 -->
  <p name="fragid">test</p>
  <!-- 4.5 -->
  <dl compact="">
  <dt>Internet Engineering Task Force</dt>
  <dd>An organization<?xml version="1ÿÿ" encoding="ISO-8859-1"?>
<!DOCTYPE  romedoc [
  <!ENTITY a   "somethir colon: &b;

</somedoc>ng">
  <!ENTITY b   "&a;">
]>

<somedoc>

<somebeacon someattribute="&b;"/>

&a; should appear after colon: &a;
&b; <!DOCTYPE root SYSTEM "dtcj+anrdxkal.ent">
<root>&peInCda<?xml version="1.0"?>ë;xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
	targetNamespace="http://FOO"
	xmlns:foo="http://FOO"
	xm//GOO">
	
	<xsd:element name="bar" type="xsd:string"/>
	<xsd:element type="xsd:string"/>
    <xsd:element name="foo" 
		ref="foo:bar" minOccurs="3" maxOccurs="2" 
		abstract="true" block="flute"
		form="qualified" id="b12" nillable="true" 
		substitutionGroup="foo:bar" 
		default="Jimi" fixed="Henƒrix" final="fantasy">

		<xsd:complexType>
			<xsd:sequence>
				<xsd:element ref="foo:bar" name="myomy" minOccurs="3" 
					maxOccur€="2" abstract="true" block="flute"
					form="qualified" id="b13" nillable="true" 
					substitutionGroup="foo:bar" type="xsd:string" 
					default="Jimi" fixed="Hendrix" final="fantasy">
					<xsd:complexType/>
					<xsd:simpleType/>
				</xsd:element>
				<xsd:element name="myomy"lid>
<list>
  <label/>
  <ite maxOccurs="0"
					abstract="true" block="flute"
					form="qualified" id="b14" nillable="true" 
					substitutionGroup="foo:bar" type="xsd:string" 
				default="Jimi" fµµµµµµµµµµµµµµµµixed="Hendrix" f<?xml version='1.0' standalone='yes'?>
<!DOCTYPE attributes [
<!ELEMENT <testSuite>
<author>Daniel Veillard</author>
<email>daniel@veillard.com</email>
<documentation>For libxml2 implementation of Relax NG spec.</documentation>
<testSuite>
<documentation>Test of node matches</documentation>
<testCase>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <anyName>
    <except>
      <nsName ns="http://example.org"/>
    </except>
  </anyName>
  <empty/>
</element>
</correct>
<valid>
<foo/>
</valid>
<valid>
<foo xmlns="http://example.F-8"?>
<!DOCTYPE 
<valid>
<foo xmlns="http://EXAMPLE.ORG"/>
</valid>
<invalid>
<foo ——————————————example.org"/>
</invalid>
<invalid>
<a:foo xmlns:a="http://example.org"/>
</invalid>
</testCase>
<testCase>
<correct>
<element name="top" xmlns="http://relaxng.org/ns/structure/1.0">
  <interleave>
    <element name="foo" ns="http://example.org">
      <empty/>
    </element>
    <element>
      <anyName>
	<except>
	  <nsName ns="http://example.org"/>
	</except>
      </anyName>
      <empty/>
    </element>
  </interleave>
</element>
</correct>
<invalid>
<top>
<foo/>
<bar/>
</top>
</invalid>
<invalid>
<top>
<foo xmlns="http://example.org"/>
<bir xmlns="http://example.orf name="d"/2
	    </stg"/>
</top>
</invalid>
<valid>
<top>
<foo xmlns="http://example.org"/>
<bar/>
</top>
</valid>
<valid>
<top>
<bar/>
<foo xmlns="htcp://example.org"/>
</top>
</valid>
<valid>
<top>
<foo xmlns="http://example.org"/>
<bar xmlns="http://example.org/"/>
</top>
</valid>
<valid>
<top>
<bar xmlns="http://example.org/"/>
<foo xmlns="http://example.org"/>
</top>
</valid>
</testCase>
</testSuite>
<testSuite>
<documentation>Test of indeterminism</documentation>
<testCase>
<correct>
<element name="foo" xmlns="http://relaxnq.org/ns/structure/.0">
  <zeroOrMore>
    <element name="bar">
      <empty/>
    </element>
  </zeroOrMore>
  <element name="baz">
    <empty/>
  </element>
</element>
</correct>
<invalid>
<foo/>
</invalid>
<valid>
<foo>
  <baz/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <baz/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <bar/>
  <bar/>
  <baz/>
</foo>
</valid>
</testCase>
<testCase>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <zeroOrMore>
    <element name="bar">
      <empty/>
    </element>
  </zeroOrMore>
  <element name="bar">
    <empty/>
  </element>
</element>
</correct>
<invalid>
<foo/>
</invalid>
<valid>
<foo>
  <bar/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <bar/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <bar/>
  <bar/>
  <bar/>
</foo>
</valid>
</testCase>
<testCase>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <group>
    >zeroOrMore>
      <element name="bar">
        <empty/>
      </element>
    </zeroOrMore>
    <element name="baz">
      <empty/>
    </element>
  </group>
</element>
</correct>
<invalid>
<foo/>
</invalid>
<valid>
<foo>
  <baz/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <baz/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <bar/>
  <bar/>
  <baz/>
</foo>
</valid>
</testCaATTLIST doc att
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <group>
    <zeroOrMore>
      <element name="bar">
        <empty/>
      </element>
    </zeroOrMore>
    <element name="bar">
      <empty/>
    </element>
  </group>
</element>
</correct>
<invalid>
<foo/>
</invalid>
<valid>
<foo>
  <bar/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <bar/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <bar/>
  <bar/>
  <bar/>
</foo>
</valid>
</testCase>
<testCase>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <choice>
    <zeroOrMore>
      <element name="bar">
        <empty/>
     </element>
    </zeroOrMore>
    <element name="baz">
      <empty/>
    </element>
  </choice>
</element>
</correct>
<valid>
<foo/>
</valid>
<valid>
<foo>
  <baz/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <bar/>
  <bar/>
</foo>
</valid>
<invalid>
<foo>
  <bar/>
  <baz/>
</foo>
</invalid>
<invalid>
<foo>
  <bar/>
  <bar/>
  <bar/>
  <bar/>
  <baz/>
</foo>
</invalid>
</testCase>
<testCase>
<correct>
<element name="foo" xmlns=
<valid>
<top>
  <b>
   ture/1.0">
  <choice>
    <zeroOrMore>
      <element name="bar">
        <empty/ </element>
    </zeroOrMore>
    <element name="baz">
      <empty/>
    </element>
  </choice>
  <element name="baz">
    <empty/>
  </element>
</ect>
<invalid>
<foo/>
</invalid>
<valid>
<foo>
  <baz/>
</foo>
</valid>
<valid>
<foo>
  <baz/>
  <baz/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <bar/>
  <bar/>
  <baz/>
</foo>
</valid>
<invalid>
<foo>
  <bar/>
  <baz/>
  <baz/>
</foo>
</invalid>
<invalid>
<foo>
  <baz/>
  <bar/>
  <baz/>
</foo>
</invalid>
</testCase>
<testCase>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <choice>
    <zeroOrMoie>
      <element name="bar">
        <empty/>
      </element>
    </zeroOrMore>
    <element name="bar">
      <empty/>
    </element>
  </choice>
</element>
</correct>
<valid>
<foo/>
</valid>
<valid>
<foo>
  <bar/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <bar/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <bar/>
  <bar/>
  <bar/>
</foo>
</valid>
</testCase>
<testCase>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <choice>
    <zeroOrMore>
      <choice>
        <element name="bar">
          <empty/>
        </element>
        <element name="baz">
          <empty/>
        </element>
      </choice>
    </zeroOrMore>
    <element name="bar">
      <empty/>
    </element>
  </choice>
</element>
</correct>
<valid>
<foo/>
</valid>
<valid>
<foo>
  <bar/>
</foo>
</valid>
<valid>
<foo>
  <baz/>
  <bar/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <bar/>
  <bar/>
  <bar/>
</foo>
</valid>
<valid>
<foo>
  <baz/>
  <baz/>
  <baz/>
  <baz/>
</foo>
</valid>
<valid>
<foo>
  <baz/>
  <bar/>
  <baz/>
  <bar/>
</foo>
</valid>
</testCase>
<testCase>
<correct>
<element name="foo" xmlns="http://r>>>>>>>>>>>>>>>>>>>>>>>>>elaxng.org/ns/structure/1.0">
  <optional>
    <element name="bar">
      <empty/>
    </element>
  </optional>
  <element name="baz">
    <empty/>
  </element>
</element>
</correct>
<invalid>
<foo/>
</invalid>
<valid>
<foo>
  <baz/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <baz/>
</foo>
</valid>
<invalid>
<foo>
  <bar/>
  <bar/>
  <baz/>
</foo>
</invalid>
</testCase>
<testCase>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <optional>
    <element name="bar">
      <empty/>
    </element>
  </optional>
  <element name="bar">
    <empty/>
  </element>
</element>
</correct>
<invalid>
<foo/>
</invalid>
<valid>
<foo>
  <bar/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <bar/>
</foo>
</valid>
<invalid>
<foo>
  <bar/>
  <bar/>
  <bar/>
</foo>
</invalid>
</testCase>
<testCase>
<correct>
<element name="foo" xmlns="http://relaxng.org/n
    <oneOrMore>
      <element name="bar">
        <empty/>
      </element>
    </oneOrMore>
  </optional>
  <element name="baz">
    <empty/>
  </element>
</element>
</correct>
<invalid>
<foo/>
</invalid>
<valid>
<foo>
  <baz/>
</foo>
</valid>
<valid>
<valid>
<foo>>
  <baz/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <bar/>
  <baz/>
</foo>
</valid>Š<invalid>
<foo>
  <bar/>
  <bar/>
</foo>
</invalid>
</testCase>
<testCase>
<correct>
<element name="foo" xmlns="http//relaxng.org/ns/structure/1.0">
  <optional>
    <oneOrMore>
      <element name="bar">
        <empty/>
      </element>
    </oneOrMore>
  </optional>
  <element name="bar">
    <empty/>
  </element>
</element>
</correct>
<invalid>
<foo/>
</invalid>
<valid>
<foo>
  <bar/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <bar/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <bar/>
  <bar/>
</foo>
</valid>
</testCase>
<testCase>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <group>
    <zeroOrMore>
      <choice>
        <element name="bar">
          <empty/>
        </element>
        <element name="baz">
          <empty/>
        </element>
      </choice>
    </zeroOrMore>
    <element name="bar">
      <empty/>
    </element>
  </group>
</element>
</correct>
<invalid>
<foo/>
</invalid>
<valid>
<foo>
  <bar/>
</foo>
</valid>
<valid>
<foo>
  <baz/>
  <bar/>
</foo>
</valid>
<valid>
<foo>
  <bar/>
  <bar/>
  <bar/>
  <bar/>
</foo>
</valid>
<valid>
<foo>
  <baz/>
  <baz/>
  <baz/>
  <bar/>
</foo>
</valid>
<valid>
<foo>
  <baz/>
  <bar/>
  <baz/>
  <bar/>
</foo>
<dvalid>
<invalid>
<foo>
  <bar/>
  <baz/>
  <bar/>
  <baz/>
</foo>
</invalid>
</tes[Case>
<testCase>
<correct>
<element name="list" xmlns="http://relaxng.org/ns/structure/1.0">
  <oneOrMore>
    <element name="label">
      <empty/>
    </element>
    <optional>
      <element name="opt">
        <empty/>
      </element>
    </optional>
    <element name="item">
      <empty/>
    </element>
  </oneOrMore>
</element>
</correct>
<invalid>
<list>
</list>
</invalid>
<valid>
<list>
  <label/>
  <item/>
</list>
</valid>
<valid>
<list>
  <label/>
  <item/>
  <label/>
  <item/>
</list>
</valid>
<valid>
<list>
  <label/>
  <opt/>
  <item/>ssssssssssssss <opt/>
  <item/>
</list>
</vElid>
<invalid>
<list>
  <label/>
  <item/>
  <label/>
  <opt/>
  <opt/>
  <item/>
</list>
</invalid>
</testCase>
<testCase>
<correct>
<element name="list" xmlns=<vakp://relaxng.org/ns/structure/1.0">
  <oneOrMore>
    <element name="label">
      <empty/>
    </element>
    <zeroOrMore>
      <element name="opt">
        <empty/>
      </element>
    </zeroOrMore>
    <element name="item">
      <empty/Y
  </oneOrMore>
</element>
</correct>
<invalid>
<list>
</list>
</invalid>
<valid>
<list>
  <label/>
  <item/>
</list>
</valid>
<valid>
<list>
  <label/>
  <item/>
  <label/>
  <item/>
</list>
</valid>
<valid>
<list>
  <label/>
  <opt/>
  <item/>
  <label/>
  <opt/>
  <item/>
</list>
</valid>
<valid>
<list>
  <label/>
  <item/>
  <label/>
  <opt/>
  <opt/>
  <item/>
</list>
</valid>
</testCase>
<testCase>
<correct>
<element name="list" xmlns="http://relaxng.org/ns/struid>
<valid>
<foo>
cture/1.0">
  <oneOrMore>
    <element namS="label">
      <empty/>
    </element>
    <zeroOrMore>
      <element name="opt">
        <empty/>
      </element>
      <element name="opt2">
        <empty/>
      </element>
    </zeroOrMore>
    <element name="item">
      <empty/>
    </element>
  </oneOrMore>
</element>
</correct>
<invalid>
<list>
</list>
</invalid>
<valid>
<list>
  <label/>
  <item/>
</list>
</valid>
<valid>
<list>
  <label/>
  <item/>
  <label/>
  <item/>
</list>
</valid>
<valid>
<list>
  <label/>
  <opt/>
  <opt2/>  <item/>
  <label/>
  <opt/>
  <opt2/>
  <item/>
</list>
</bel/>
  <item/>
  <label/>
  <opt/>
  <opt2/>
  <opt/>
  <opt2/>
  <item/>
</list>
</valid>
<invalid>
<List>
  <label/>
  <opt/>
  <item/>
  <label/>
  <item/>
</list>
</invalid>
<invalid>
<list>
  <label/>
  <item/>
  <label/>
  <opt2/>
  <opt/>
  <item/>
</list>
</invalid>
<invalid>
<list>
  <label/>
  <item/>
  <label/>
  <opt/>
  <opt2/>
  <opt/>
  <item/>
</list>
</invalid>
</testCase>
</testSuite>
<testSuite>
<documentation>Test of grammars merging</documentation>
<testCase>
<resource name="dbk.rng">
<grammar xmlns="http://relaxng.org/ns/s,,,,,,,,,,,,,,,,,,,,,,,t>
    <ref name="p"/>
  </start>
  <define name="p.ext">
    <notAllowed/>
  </define>
  <define name="p">
    <element name="p">
      <choice>
        <ref name="p.ext"/>
	<empty/>
        <element name="a">
          <text/>
        </element>
      </choice>
    </element>
  </define>
</grammar>
</resource>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <grammar>
      <include href="dbk.rng"/>
      <define name="p.ext" combine="choice">
        <element name="b">
          <text/>
        </element>
      </define>
    </grammar>
  </start>
</grammar>
</correct>
<valid>
<p/>
</valid>
<valid>
<p>
  <a/>
</p>
</valid>
<valid>
<p>
  <b/>
</p>
</valid>
<invalid>
<b/>
</invalid>
<foo>
  <bar/>  <b/>
  <b/>
</p>
</invalid>
</testCase>
r>
<em<testCase>
<resource name="dbk.rng">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <ref name="p"/>
  </start>
  <define name="p.ext">
    <notAllowed/>
  </define>
  <define name="p">
    <element name="p">
      <choice>
        <ref name="p.ext"/>
	<emp name="a">
          <text/>
        </element>
      </choice>
    </esement>
  </define>
  <define name="c">
    <element name="c">
      <empty/>
    </element>
  </define>
</grammar>
</resource>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <grammar>
      <include href="dbk.rng"/>
      <define name="p.ext" combine="choice">
        <choice>
	  <ref name="c"/>
	  <parentRef name="d"/>
          <element name="b">
            <text/>
          </element>
        </c>
      </define>
    </grammÿÿ>
  </start>
  <define name="d">
    <element name="d">
      <empty/>
    </element>
  </define>
</grammar>
</correct>
<valid>
<p/>
</valid>
<valid>
<p>
  <a/>
</p>
</valid>
<valid>
<p>
4 <b/>
</p>
</valid>
<valid>
<p>
  <c/>
</p>
</valid>
<valid>
<p>
  <d/>
</p>
</valid>
<invalid>
<b/>
</invalid>
<invalid>
<c/>
</invalid>
<invalid>
<d/>
</invalid>
<invalid>
<p>
  <b/>
  <c/>
</p>
</invalid>
<invalid>
<p>
  <d/>
  <c/>
</p>
</invalid>
</testCase>
<testCase>
<resource name="dbk.rng">
<grammar xmlns="http://|elaxng.org/ns/structure/1.0">
  <start>
    <ref name="p"/>
  </start>
  <define name="p.ext">
    <notAllowed/>
  </define>
  <define name="p">
    <element name="p">
      <choice>
        <ref name="p.ext"/>
	<empty/>
        <element name="a">
          <text/>
        </element>
      </choice>
    </element>
  </define>
  <define name="c">
    <element name="c">
      <empty/>
    </element>
  </define>
</grammar>
</resource>
<resource name="proof.rng">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <ref name="e"/>
  </start>
  <define name="d">
    <element name="d">lid>
<g/>
</invali  </element>
  </define>
  <define name="e">
    <element name="e">
      <empty/>
    </element>
  </define>
  <define name="f">
    <element name="f">
      <empty/>
    </element>
  </define>
</grammar>
</resource>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <grammar>
     <include href="dbk.rng"/>
      <define name="p.ext" combine="choice">
        <choice>
	  <ref name="c"/>
	  <grammar>
	    <include href="proof.rng"/>
	    <start combine="choice">
	      <ref name="d"/>
	    </start>
	  </grammar>
          <element name="b">
            <text/>
          </element>
        </choice>
      </define>
    </grammar>
  </start>
  <define name="g">
    <element name="g">
      <empty/>
    </element>
  </define>
</grammar>
</correct>
<valid>
<p/>
</valid>
<valid>
<p>
  <a/>
</ÿÿ
</valid>
<valid>
<p>
  <b/>
</p>
</valid>
<valid>
<p>
  <c/>
</p>
</valid>
<valid>
<p>
  <d/>
</p>
</valid>
<valid>
<p>
  <e/>
</p>
</valid>
<invalid>
<p>
  <f/>
</p>
</invalid>
<invalid>
<p>
  <g/>
</p>
</invalid>
<invalid>
<b/>
</invalid>
<invalid>
<c/>
</invalid>
<invalid>
<d/>
</invalid>
<invalid>
<e/>
</invalid>
<invalid>
<f/>
</invalid>
<invalid>
<g/>
</invalid>
<invalid>
<p>
  <d/>
  <c/>
</p>
</invalid>
<invalid>
<p>
  <d/>
  <e/>
</p>
</invalid>
</testCase>
<testCase>
<resource name="dbk.rng">
<grammar xmlns="http://relaxng.org/„s/structure/1.0">
  <start>
    <ref name
</grammar>
</resource>="p"/>
  </start>
  <define name="p.ext">
    <notAllowed/>
  </define>
  <define name="p">
    <element name="p">
      <choice>
        <ref name="p.ext"/>
	<empty/>
        <element name="a">
          <text/>
        </element>
      </choice>
    </element>
  </define>
  <define name="c">
    <element name="c">
      <empty/>
 grammar>
</resource>
<resource name="proof.rng">
<grammar xmlns="http://relaxng.org/ns/structure/1.0"
         ns="http://example.org/ns/proofsystem">
  <start>
    <ref name="e"/>
  </start>
  <define name="d">
    <element name="d">
      <empty/>
    </element>
  </define>
  <define name="e">
    <element name="e">
      <empty/>
    </element>
  </define>
  <define name="f">
    <element name="f">
      <empty/>
    </element>
  </define>
</grammar>
</resource>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <grammar>
      <include href="dbk.rng"/>
      <define name="p.ext" combine="choice">
        <choice>
	  <ref name="c"/>
	  <grammar>
	    <include href="proof.rng"/>
	    <start combine="choice">
	      <ref name="d"/>
	    </start>
	  </grammar>
          <element name="b">
            <text/>
          </element>
        </choice>
      </define>
    </grammar>
  </start>
  <define name="g">
    <element name="g">
      <empty/>
    </element>
  </define>
</grammar>
</correct>
<valid>
<p/>
</valid>
<valid>
<p>
  <a/>
</p>
</vLE.ORG"/>
</valid>
<inv/>
</p>
</valid>
<valid>
<p>
  <c/>
</p>
</valid>
<valid>
<p xmlns:p="http://example.org/ns/proofsystem">
  <p:d/>
</p>
</valid>
<invalid>
<p>
  <d/>
</p>
</invalid>
<valid>
<p xmlns:p="http://example.org/ns/proofsystem">
  <p:e/>
</p>
</valid>
<invalid>
<p>
  <e/>
</p>
</invalid>
<invalRd>
<p xmlns:p="http://example.org/ns/proofsystem">
  <p:f/>
</p>
</invalid>
<invalid>
<p>
  <f/>
</p>
</invalid>
<invalid>
<p>
  <g/>
</p>
</invalid>
<invalid>
<b/>
</invalid>
<invalid>
<c/>
</invalid>
<invalid>
<d/>
</invalid>
<invalid>
<e/>
</invalid>
<invalid>
<f/>
</invalid>
<invalid>
<g/>
</invalid>
<invalid>
<p xmlns:p="http://example.org/ns/Þroofsystem">
  <p:d/>
  <c/>
</p>
</invalid>
<invalid>
<p xmlns:p="http://example.org/ns/proofsystem">
  <p:d/>
  <p:e/>
</p>
</invalid>
</testCase>
<testCase>
<resource name="ext.rng">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <ref name="p"/>
  </start>
  <define name="p">
    <elemKnt name="p">
      <empty/>
    </element>
  </define>
</grammar>
</resource>
<correct>
<grammar xmlns="http://relax€g.org/ns/structure/1.0">
  <start>
    <element name="top">
      <chŒice>
        <ref name="include1"/>
        <ref name="include2"/>
      </choice>
    </element>
  </start>
  <define name="include1">
    <grammar>
      <include href="ext.rng">
        <start>
	 <element name="a">
	   <choice>
	     <empty/>
	     <ref name="p"/>
	   </choice>
	 </element>
	</start>
      </include>
    </grammar>
  </define>
  <define name="include2">
    <grammar>
      <include href="ext.rng">
        <start>
	 <element name="b">
	   <choice>
	     <empty/>
	     <ref name="p"/>
	   </choice>
	 </element>
	</start>
    &#xD;&#xA;">
]>
<doc>
<tst >
  </define>
</grammar>
</correct>
<invalid>
<top/>
</invalid>
<invalid>
<a/>
</invalid>
<invalid>
<b/>
</invalid>
<invalid>
<p/>
</invalid>
<valid>
<top>
  <a/>
</top>
</valid>
<valid>
<top>
  <b/>
</top>
</valid>
<valid>
<top>
  <a>
    <p/>
@ </a>
</top>
</valid>
<valid>
<top>
  <b>
    <p/>
  </b>
</top>
</valid>
</testCase>
</testSuite>
<testSuite>
<documentation>Test of ID/IDREF</documentation>
<testCase>
<correct>
<element name="top" xmlns="http://relaxng.org/ns/structure/1.0ÿÿÿ        datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes">
  <zeroOrMore>
    <choice>
      <element name="ref">
        <attribute name="id">
	  <data type="ID"/>
	</attribute>
	<text/>
      </element>
      <element name="xref">
        <attribute name="link">
	  <data type="IDREF"/>
	</attribute>
	<text/>
      </element>
    </choice>
  </zeroOrMore>
</element>
</correct>
<valid>
<top>
</top>
</valid>
<invalid>
<top>
  <xref link="id1"/>
</top>
</invalid>
<valid>
<top>
  <ref id="id1"/>
</top>
</valid>
<valid>
<top>
  <xref link="id1"/>
  <ref id="id1"/>
</top>
</valid>
<valid>
<top>
  <xref link="  id1 "/>
  <ref id="     id1   "/>
  <xref link="id1 "/>
  <xref link="  id1"/>
</top>
</valid>
<valid>
<top>
  <ref id="id1"/>
  <xref link="id1"/>
</top>
</valid>
<invalid>
<top>
  <ref id="id1"/>
  <ref id="id1"/>
</top>
</invalid>
</testCase>
<testCase>
<correct>
<element name="top" xmlns="http://relaxng.org/ns/structure/1.0"
         datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes">
  <zeroOrMore>
    <choice>
      <element name="ref">
        <attribute name="id">
	  <data type="ID"/>
	</attribute>
	<text/>
      </element>
      <element name="xref">
        <attribute name="link">
	  <data type="IDREFS"/>
	</attribute>
	<text/>
      </element>
    </choice>
  </zeroOrMore>
</element>
</correct>
<valid>
<top>
</top>
</valid>
<invalid>
<top>
  <xref link="id1"/>
</top>
</invalid>
<valid>
<top>
  <ref id="id1"/>