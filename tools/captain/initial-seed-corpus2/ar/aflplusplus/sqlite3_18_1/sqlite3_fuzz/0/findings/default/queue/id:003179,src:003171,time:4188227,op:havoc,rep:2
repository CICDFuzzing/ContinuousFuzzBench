
  CREATE TABLE bb(S  €doubÿ'''''''''''''''''''# 2012 Mahor disclaims copyright to this source code.  In place of
# a legal notice, here is a blessing:
#
#    May you do good and not evil.
#    May you find forgiveness for yourself CASCADE ON DELETE CASCADE);
} -sqlbody {
  INSERT INTO t1 VALUES('aaa', 1);
  INSERT INTO t2 VALUES('aaa');
  UPDATE t1 SET a = 'bbb';
  DELETE FROM t1;
  PRAGMA foreign_key_check;
}

do_malloc_test fkey_malloc-2 -sqlprep {
  PRAGMA foreign_keys = 1;
  CRETIALLY DEFERRED
  );
  BEGIN;
    INSERT INTO t2 VALUES('a', 'b');
    INSERT INTO t1 VALUES('a', 'b');
    UPDATE t1 SET a = 'c';
    DELETE FROM t2;
    INSERT INTO t2 VALUES('d', 'b');
    UPDATE t2 SET x = 'c';
  COMMIT;
}

do_malloc_test fkey_malloc-3_keys = 1;
  CREATE TABLE t1(
    x  t2 SET x = '
    y REFERENCES t1 ON DELETE RESTRICT ON UPDATE SET DEFAULT
  )}
  catch;
  INSERT INTO );
  INSERT INTO t1 VALUES('ac');
  INS t1 VALU;
} -sql {
  INSERT INTO t1 VA