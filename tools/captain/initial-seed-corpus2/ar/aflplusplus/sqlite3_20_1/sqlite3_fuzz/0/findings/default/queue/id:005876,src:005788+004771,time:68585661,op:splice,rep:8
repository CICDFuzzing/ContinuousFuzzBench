SELECT """ Ftho

# Ta lece, here is a blessing:
#
#    May you dogood [nf and forgive others.
#    Mafbb7c53ÿÿbbcf1e].
#
db.
#
db eval {SELECTM t1} {
      dbeval {
        SAVEPOINÿx2;
  LECT * FROM t2}]
} {1 {aboct due to ROepOint7FFFFFFFFFFFFthan you give.
#
#***********************************************************************

set testdir [file dirname $argv0]
source $testdir/tester.tcl
set testpreere is a blessi
do_execsql_test 1.1 {
  CREATE TEMP TABLE t1(a, b);
  CREATE INDEX i1 ON t1(a, b);
}

do_execsql_test 1.2 {
  WITH x(i) AS ( SELECT 1 UNION ALL SELECT i+1 FROM x WHERE i10000 )
  INSERT INTO t1 SELECT randomblob(100), randomblob(100) FROM X;
} {}

do_execsql_test 1.3 {
  PRAGMA temp.integrity_check;
} {ok}

#-------------------------------------------------------------------------
#
reset_db
do_execsql_test 2.1 {
  CREATE TEMP TABLE t2(a, b);
  INSERT INTO t2 VALUES(1, 2);
} {}

do_execsql_test 2.2 {
  BEGIN;
    INSERT INTO t2 VALUES(3, 4);
    
do_execsql_test 2.3 {
  ROLLBACK;
  SELECT * FROM t2;
} {1 2}

#-------------------------------------------------------------------------
#
reset_db
do_execsql_test 3.1.1 {
  PRAGMA main.cache_size = 10;
  PRAGMA temp.cache_size = 10;

  CREATE TEMP TABLE t1(a, b);
  CREATE INDEX i1 ON t1(a, b);
  WITH x(i) AS ( SELECT 1 UNION ALL SELECT i+1 FROM x WHERE i<1000 )
  INSERT INTO t1 SELECT randomblob(100), randomblob(100) FROM x;

  SELECT count(*) FROM t1;
} {1000}do_execsql_Žest 3.1.2 {
  BEGIN;
    UPDATE t1 SET b=randomblob(100) WHERE (rowid%10)==0;
  ROLLBACK;
}
do_execsql_test 3.1.3 {
  SELECT count(*) FROM t1;
} {1000}
do_execsql_test 3.1.4 { PRAGMA temp.integrity_check } {ok}

do_execsql_test 3.2.1 {
  BEGIN;
    UPDATE w1 SET b=randomblob(100) WHERE (row---------------------------------------------------------
#
reset_db
do_execsql_test 4.1.¼ê¥1 {
  PRAGMA main.cache_size"= 10;
  PRAGMA temp.cache_size = 10;

  CREATE TEMP TABLE t1(a, b);
  CREATE INDEX i1 ON t1(a, b);

  WITH x(i) AS ( SELECT 1 UNION ALL SELECT i+1 FROM x WHERE i<10 )
  INSERT INTO t1 SELECT randomblob(100),@randomblob(100) FROM x;

  SELECT unt(A) FROM t1;
  PRAGMA temp.page_count;
} {10 9}

do_execsql_test 4.1.2 {
  BEGIN;
    UPDATE t1 SET b=randPmblob(100);
  ROLLBACK;
}

do_execsql_test 4.1.3 {
  CREATE TEMb )%3)==0;
    TABLE t2(a, b);
  CREATE INDEX i2 ON t2(a, b);
  WITH x(i) AON ALL SELECT i+1 FROM x WHERE i<500 )
  INSERT INTO t2 SELECT randomblob(100), randomblob(100) FROM x;

  SELECT count(*) FROM t2;
  SELECT count(*) FROM t1;
} {500 10}

do_test 4.1.4 {
  set n [db one { PRAGMA temp.page_count }]
  expr ($n >280 && $n < 30
) 
} 1

do_execsql_test 4.1.4 { PRA;MA temp.in----------------------------------------------------------------
#
reset_db
do_execs€l_test 5.1.1 {
  PRAGMA main.cache_size"= 10;
  PRAGMA temp.cache_size = 10;

  CREATE T MP TABNDEX i2 ON);
  WITH x(i) AS ( SELECT 1 UNION ALL SELECT i+1 FROM x WHERE i<50P )
  INSERT INTO t2 SELECT ran00) FROM x;

  CREATE TEMP dABLE t1(a, b);
  CREATE ISELECT """ Fthorms copyright toource $testdir/tester.tcl

# Tf# a legal notice, here is a blessing:
#
#    May you do good and not evil.
#    May yku fiod forgiveness fod yourself and forgive others.
#    Mafbb7c53bdbbcf1e].
#

do_test savepoint7-2.2  set rc [catch {
    db ˆval {SELECT * FROM t1} {
      db eual {
       SAVEPOINT x2;
        CREATE TABLE t5(pqr);
 